<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .survey-container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 500px;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .section-title {
            color: #1a5490;
            font-size: 1.4em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .instructions {
            background-color: #e8f4f8;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-style: italic;
            color: #2c3e50;
        }
        .question {
            margin: 25px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border-left: 3px solid #3498db;
        }
        .question-text {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
            font-size: 1.05em;
        }
        .chinese {
            color: #555555;
            font-size: 0.95em;
            display: block;
            margin-top: 5px;
        }
        .radio-group, .scale-group {
            margin: 10px 0;
            padding: 10px 0;
        }
        .radio-group label {
            display: inline-block;
            margin-right: 20px;
            cursor: pointer;
            color: #34495e;
            font-size: 1em;
        }
        .scale-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 600px;
        }
        .scale-group label {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 5px;
            cursor: pointer;
        }
        .scale-label {
            font-size: 0.9em;
            margin-top: 5px;
            text-align: center;
            color: #34495e;
            font-weight: bold;
        }
        textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-family: Arial, sans-serif;
            font-size: 1em;
            resize: vertical;
            color: #2c3e50;
        }
        input[type="radio"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
        }
        .nav-button {
            background-color: #3498db;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .nav-button:hover {
            background-color: #2980b9;
        }
        .nav-button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        .submit-button {
            background-color: #27ae60;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .submit-button:hover {
            background-color: #229954;
        }
        .progress-indicator {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: bold;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #ecf0f1;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #3498db;
            transition: width 0.3s;
        }
        .intro-text {
            text-align: center;
            color: #2c3e50;
            font-size: 1.05em;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        <div class="progress-indicator" id="progressText">Page 1 of 5</div>

        <form id="workshopSurvey">

            <!-- Page 1: Software Installation -->
            <div class="page active" id="page1">
                <div class="section-title">
                    Section 1: Software Installation
                    <span class="chinese">第一部分：軟體安裝</span>
                </div>
                <div class="instructions">
                    Please indicate whether you have installed the following software on your laptop.<br>
                    <span class="chinese">請說明您是否已在筆記型電腦上安裝以下軟體。</span>
                </div>

                <div class="question">
                    <div class="question-text">
                        1. OpenSesame (latest version)
                        <span class="chinese">OpenSesame（最新版本）</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q1" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q1" value="no"> No 否</label>
                        <label><input type="radio" name="q1" value="unsure"> Not sure 不確定</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        2. R and RStudio (latest version)
                        <span class="chinese">R 與 RStudio（最新版本）</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q2" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q2" value="no"> No 否</label>
                        <label><input type="radio" name="q2" value="unsure"> Not sure 不確定</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        3. Git (version control software)
                        <span class="chinese">Git（版本控制軟體）</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q3" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q3" value="no"> No 否</label>
                        <label><input type="radio" name="q3" value="unsure"> Not sure 不確定</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        4. Node.js
                        <span class="chinese">Node.js</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q4" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q4" value="no"> No 否</label>
                        <label><input type="radio" name="q4" value="unsure"> Not sure 不確定</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        5. Modern web browser (Chrome, Firefox, or Edge)
                        <span class="chinese">現代化網頁瀏覽器（Chrome、Firefox 或 Edge）</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q5" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q5" value="no"> No 否</label>
                        <label><input type="radio" name="q5" value="unsure"> Not sure 不確定</label>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button type="button" class="nav-button" onclick="previousPage()" disabled>Previous 上一頁</button>
                    <button type="button" class="nav-button" onclick="nextPage()">Next 下一頁</button>
                </div>
            </div>

            <!-- Page 2: Account Setup -->
            <div class="page" id="page2">
                <div class="section-title">
                    Section 2: Account Setup
                    <span class="chinese">第二部分：帳號設定</span>
                </div>
                <div class="instructions">
                    Please indicate whether you have set up the following accounts.<br>
                    <span class="chinese">請說明您是否已設定以下帳號。</span>
                </div>

                <div class="question">
                    <div class="question-text">
                        6. JATOS account (MindProbe or similar server)
                        <span class="chinese">JATOS 帳號（MindProbe 或類似伺服器）</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q6" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q6" value="no"> No 否</label>
                        <label><input type="radio" name="q6" value="local"> Plan to use local server 計劃使用本地伺服器</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        7. Google account (if required)
                        <span class="chinese">Google 帳號（如需要）</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q7" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q7" value="no"> No 否</label>
                        <label><input type="radio" name="q7" value="local"> Plan to use local server 計劃使用本地伺服器</label>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button type="button" class="nav-button" onclick="previousPage()">Previous 上一頁</button>
                    <button type="button" class="nav-button" onclick="nextPage()">Next 下一頁</button>
                </div>
            </div>

            <!-- Page 3: Knowledge & Skills -->
            <div class="page" id="page3">
                <div class="section-title">
                    Section 3: Knowledge & Skills Self-Assessment
                    <span class="chinese">第三部分：知識與技能自我評估</span>
                </div>
                <div class="instructions">
                    Please rate your familiarity with the following topics.<br>
                    <span class="chinese">請評估您對以下主題的熟悉程度。</span><br>
                    <strong style="color: #2c3e50;">1 = No knowledge 無知識 | 2 = Beginner 初學者 | 3 = Intermediate 中等 | 4 = Advanced 進階 | 5 = Expert 專家</strong>
                </div>

                <div class="question">
                    <div class="question-text">
                        8. Experimental psychology (research design, variables, data collection)
                        <span class="chinese">實驗心理學（研究設計、變項、資料收集）</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q8" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q8" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q8" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q8" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q8" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        9. Research ethics (IRB, informed consent, participant privacy)
                        <span class="chinese">研究倫理（IRB、知情同意、參與者隱私）</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q9" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q9" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q9" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q9" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q9" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        10. Computer literacy (file management, directories, command-line)
                        <span class="chinese">電腦操作能力（檔案管理、目錄、命令列）</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q10" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q10" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q10" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q10" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q10" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        11. HTML/CSS basics
                        <span class="chinese">HTML/CSS 基礎</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q11" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q11" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q11" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q11" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q11" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        12. R programming (data reading, manipulation)
                        <span class="chinese">R 程式設計（資料讀取、處理）</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q12" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q12" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q12" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q12" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q12" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        13. Git version control (commit, push, pull)
                        <span class="chinese">Git 版本控制（commit、push、pull）</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q13" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q13" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q13" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q13" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q13" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        14. OpenSesame software
                        <span class="chinese">OpenSesame 軟體</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q14" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q14" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q14" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q14" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q14" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        15. JATOS platform
                        <span class="chinese">JATOS 平台</span>
                    </div>
                    <div class="scale-group">
                        <label><input type="radio" name="q15" value="1" required><span class="scale-label">1</span></label>
                        <label><input type="radio" name="q15" value="2"><span class="scale-label">2</span></label>
                        <label><input type="radio" name="q15" value="3"><span class="scale-label">3</span></label>
                        <label><input type="radio" name="q15" value="4"><span class="scale-label">4</span></label>
                        <label><input type="radio" name="q15" value="5"><span class="scale-label">5</span></label>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button type="button" class="nav-button" onclick="previousPage()">Previous 上一頁</button>
                    <button type="button" class="nav-button" onclick="nextPage()">Next 下一頁</button>
                </div>
            </div>

            <!-- Page 4: Preparation Activities -->
            <div class="page" id="page4">
                <div class="section-title">
                    Section 4: Preparation Activities
                    <span class="chinese">第四部分：準備活動</span>
                </div>
                <div class="instructions">
                    Please indicate whether you have completed the following preparation activities.<br>
                    <span class="chinese">請說明您是否已完成以下準備活動。</span>
                </div>

                <div class="question">
                    <div class="question-text">
                        16. Reviewed the OpenSesame beginner tutorial
                        <span class="chinese">已預習 OpenSesame 初學者教學</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q16" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q16" value="no"> No 否</label>
                        <label><input type="radio" name="q16" value="partial"> Partially 部分完成</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        17. Read about desktop vs. web-based experiments
                        <span class="chinese">已閱讀桌面版與網頁版實驗的差異</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q17" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q17" value="no"> No 否</label>
                        <label><input type="radio" name="q17" value="partial"> Partially 部分完成</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        18. Read about OSWeb capabilities and limitations
                        <span class="chinese">已閱讀 OSWeb 功能與限制說明</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q18" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q18" value="no"> No 否</label>
                        <label><input type="radio" name="q18" value="partial"> Partially 部分完成</label>
                    </div>
                </div>

                <div class="question">
                    <div class="question-text">
                        19. Familiarized with JATOS platform interface
                        <span class="chinese">已熟悉 JATOS 平台介面</span>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="q19" value="yes" required> Yes 是</label>
                        <label><input type="radio" name="q19" value="no"> No 否</label>
                        <label><input type="radio" name="q19" value="partial"> Partially 部分完成</label>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button type="button" class="nav-button" onclick="previousPage()">Previous 上一頁</button>
                    <button type="button" class="nav-button" onclick="nextPage()">Next 下一頁</button>
                </div>
            </div>

            <!-- Page 5: Workshop Goals -->
            <div class="page" id="page5">
                <div class="section-title">
                    Section 5: Workshop Goals
                    <span class="chinese">第五部分：工作坊目標</span>
                </div>
                <div class="instructions">
                    Please answer the following open-ended questions.<br>
                    <span class="chinese">請回答以下開放性問題。</span>
                </div>

                <div class="question">
                    <div class="question-text">
                        20. Do you have a research question or experiment idea you want to work on during the workshop?
                        <span class="chinese">您是否有想在工作坊期間進行的研究問題或實驗想法？</span>
                    </div>
                    <textarea name="q20" placeholder="Please describe your research question or experiment idea... 請描述您的研究問題或實驗想法..."></textarea>
                </div>

                <div class="question">
                    <div class="question-text">
                        21. What are your main goals for attending this workshop?
                        <span class="chinese">您參加本工作坊的主要目標是什麼？</span>
                    </div>
                    <textarea name="q21" placeholder="Please describe your goals... 請描述您的目標..." required></textarea>
                </div>

                <div class="question">
                    <div class="question-text">
                        22. Are there any specific challenges you hope to address in this workshop?
                        <span class="chinese">您希望在本工作坊中解決哪些特定挑戰？</span>
                    </div>
                    <textarea name="q22" placeholder="Please describe any challenges... 請描述任何挑戰..."></textarea>
                </div>

                <div class="navigation-buttons">
                    <button type="button" class="nav-button" onclick="previousPage()">Previous 上一頁</button>
                    <button type="button" class="submit-button" onclick="submitSurvey()">Submit Survey 提交問卷</button>
                </div>
            </div>

            <!-- Hidden submit button for OSWeb -->
            <input type="submit" id="hiddenSubmit" style="display: none;">

        </form>
    </div>

    <script>
        var currentPage = 1;
        var totalPages = 5;

        function showPage(pageNum) {
            // Hide all pages
            var pages = document.querySelectorAll('.page');
            pages.forEach(function(page) {
                page.classList.remove('active');
            });

            // Show current page
            document.getElementById('page' + pageNum).classList.add('active');

            // Update progress
            var progress = (pageNum / totalPages) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = 'Page ' + pageNum + ' of ' + totalPages;

            // Scroll to top
            window.scrollTo(0, 0);
        }

        function validateCurrentPage() {
            var currentPageElement = document.getElementById('page' + currentPage);
            var requiredInputs = currentPageElement.querySelectorAll('input[required], textarea[required]');

            for (var i = 0; i < requiredInputs.length; i++) {
                var input = requiredInputs[i];
                if (input.type === 'radio') {
                    var radioGroup = currentPageElement.querySelectorAll('input[name="' + input.name + '"]');
                    var checked = false;
                    for (var j = 0; j < radioGroup.length; j++) {
                        if (radioGroup[j].checked) {
                            checked = true;
                            break;
                        }
                    }
                    if (!checked) {
                        alert('Please answer all required questions before proceeding.\n請回答所有必填問題後再繼續。');
                        return false;
                    }
                } else if (input.type === 'textarea' || input.type === 'text') {
                    if (input.value.trim() === '') {
                        alert('Please answer all required questions before proceeding.\n請回答所有必填問題後再繼續。');
                        return false;
                    }
                }
            }
            return true;
        }

        function nextPage() {
            if (validateCurrentPage()) {
                if (currentPage < totalPages) {
                    currentPage++;
                    showPage(currentPage);
                }
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                showPage(currentPage);
            }
        }

        function submitSurvey() {
            // Validate current page first
            if (!validateCurrentPage()) {
                return;
            }

            // Collect all form data
            var form = document.getElementById('workshopSurvey');
            var formData = new FormData(form);
            var responses = {};

            for (var pair of formData.entries()) {
                responses[pair[0]] = pair[1];
            }

            // For OpenSesame/OSWeb integration:
            // Store all responses in experiment variables
            if (typeof vars !== 'undefined') {
                for (var key in responses) {
                    vars[key] = responses[key];
                }

                // Calculate readiness scores
                var softwareScore = 0;
                for (var i = 1; i <= 5; i++) {
                    if (responses['q' + i] === 'yes') softwareScore++;
                }
                vars.software_readiness = softwareScore;

                var knowledgeScore = 0;
                for (var i = 8; i <= 15; i++) {
                    knowledgeScore += parseInt(responses['q' + i]);
                }
                vars.knowledge_score = knowledgeScore;
                vars.knowledge_avg = (knowledgeScore / 8).toFixed(2);

                var prepScore = 0;
                for (var i = 16; i <= 19; i++) {
                    if (responses['q' + i] === 'yes' || responses['q' + i] === 'partial') prepScore++;
                }
                vars.prep_score = prepScore;
            }

            // Log responses to console for testing
            console.log('Survey responses:', responses);

            // Click hidden submit button to trigger OSWeb continuation
            document.getElementById('hiddenSubmit').click();
        }

        // Initialize first page
        showPage(1);
    </script>
</body>
</html>
